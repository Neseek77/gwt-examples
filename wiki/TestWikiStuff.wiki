#summary test out wiki stuff

{{{
Brandon Donnelson
http://gwt-examples.googlecode.com
http://c.gawkat.com
Challenge is to: Spice up the java forum with some profile pictures, lets beat the python community. :)
}}}


{{{
  private String getGoogleLoginUrl() {
    if (cp.getAccessToken() == null && cp.getAccessToken().getThirdPartyLoginData() == null) {
      return null;
    }
    
    String domain = GWT.getHostPageBaseURL();
    String path = Window.Location.getPath();
    String qs = Window.Location.getQueryString();
    String historyToken = History.getToken();
    if (qs == null) {
      qs = "";
    }
    if (domain.matches(".*/") == true) {
      domain = domain.substring(0,domain.length()-1);
    }
    
    String url = domain + path + qs + "#" + historyToken;
    url = URL.encode(url);
    url = Global_String.encodeUrlDelimiters(url);

    String baseUrl = cp.getAccessToken().getThirdPartyLoginData().getGoogleLoginUrl();
    baseUrl = baseUrl.replaceAll("=%2F.*", "=" + url);
    
    return baseUrl;
  }
}}}